{
    "providers": [
        {
            "provider": "directory",
            "params": {
                "directory": "./rules"
            }
        },
        {
            "provider": "rethinkdb",
            "params": {
                "host": "localhost",
                "port": "28015"
            }
        }
    ],
    "types": [
        {
            "id": "misc",
            "validate": false,
            "values": {
                "title": {
                    "required": true
                },
                "text": {
                    "required": true
                }
            }
        },
        {
            "id": "text",
            "values": {
                "title": {
                    "required": true
                },
                "author": {
                    "required": false,
                    "values": {
                        "name": {
                            "required": true
                        },
                        "url": {
                            "required": false
                        }
                    }
                },
                "published": {
                    "required": false
                },
                "text": {
                    "required": true
                }
            }
        },
        {
            "id": "photo",
            "values": {
                "title": {
                    "required": true
                },
                "caption": {
                    "required": false
                },
                "author": {
                    "required": false,
                    "values": {
                        "name": {
                            "required": true
                        },
                        "url": {
                            "required": false
                        }
                    }
                },
                "thumbnail": {
                    "required": false,
                    "values": {
                        "url": {
                            "required": true
                        },
                        "width": {
                            "required": false
                        },
                        "height": {
                            "required": false
                        }
                    }
                },
                "url": {
                    "required": true
                },
                "height": {
                    "required": false
                },
                "width": {
                    "required": false
                }
            }
        },
        {
            "id": "video",
            "values": {
                "title": {
                    "required": true
                },
                "description": {
                    "required": false
                },
                "author": {
                    "required": false,
                    "values": {
                        "name": {
                            "required": true
                        },
                        "url": {
                            "required": true
                        }
                    }
                },
                "thumbnail": {
                    "required": false,
                    "values": {
                        "url": {
                            "required": true
                        },
                        "width": {
                            "required": true
                        },
                        "height": {
                            "required": true
                        }
                    }
                },
                "html": {
                    "required": true
                }
            }
        },
        {
            "id": "rich",
            "values": {
                "html": {
                    "required": true
                },
                "height": {
                    "required": false
                },
                "width": {
                    "required": false
                }
            }
        }
    ],
    "rules": [
        {
            "id": "text_universal",
            "priority": 0,
            "type": "text",
            "urls": [
                ".*"
            ],
            "values": {
                "title": {
                    "@extractor": {
                        "id": "gofetch.title.extractor"
                    }
                },
                "text": {
                    "@extractor": {
                        "id": "gofetch.article.extractor"
                    }
                }
            }
        },
        {
            "id": "imgur",
            "priority": 5,
            "type": "photo",
            "urls": [
                "http://imgur.com/[a-zA-Z0-9]+"
            ],
            "values": {
                "title": {
                    "@extractor": {
                        "id": "gofetch.selector.extractor",
                        "params": {
                            "selector": "#image-title"
                        }
                    }
                },
                "url": {
                    "@extractor": {
                        "id": "gofetch.selector.extractor",
                        "params": {
                            "selector": "#image img",
                            "attribute": "src"
                        }
                    }
                }
            }
        },
        {
            "id": "bbc_news",
            "priority": 5,
            "type": "text",
            "urls": [
                "http://www.bbc.co.uk/news/.*"
            ],
            "values": {
                "title": {
                    "@extractor": {
                        "id": "gofetch.selector.extractor",
                        "params": {
                            "selector": ".story-header"
                        }
                    }
                },
                "author": {
                	"name": {
                		"@extractor": {
                		    "id": "gofetch.selector.extractor",
                		    "params": {
                		        "selector": ".byline-name"
                		    }
                		}
                	}
                },
                "published": {
                    "@extractor": {
                        "id": "gofetch.selector.extractor",
                        "params": {
                            "selector": ".story-date .date"
                        }
                    }
                },
                "text": {
                    "@extractor": {
                        "id": "gofetch.selector_text.extractor",
                        "params": {
                            "selector": ".story-body"
                        }
                    }
                }
            }
        },
        {
            "id": "youtube",
            "priority": 5,
            "type": "oembed",
            "urls": [
                "https?://(www.)?youtube.com/watch\\?v=.*"
            ],
            "values": {
                "@extractor": {
                    "id": "gofetch.oembed.extractor",
                    "params": {
                        "endpoint": "http://www.youtube.com/oembed?url=%s&format=json"
                    }
                }
            }
        },
        {
            "id": "flikr",
            "priority": 5,
            "type": "oembed",
            "urls": [
                "https?://(www.)?flickr.com/photos/.*"
            ],
            "values": {
                "@extractor": {
                    "id": "gofetch.oembed.extractor",
                    "params": {
                        "endpoint": "http://www.flickr.com/services/oembed/?url=%s&format=json"
                    }
                }
            }
        }
    ]
}
